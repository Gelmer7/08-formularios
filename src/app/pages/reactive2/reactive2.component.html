<h1>Formulario <small>Reactivo 2</small></h1>

<form  class="mt-5" (ngSubmit)="guardar()" [formGroup]="forma">
    <div class="form-group row">
        <label class="col-2"> Nombre</label>
        <div class="col">
            <input  type="text"
                    class="form-control"
                    placeholder="Nombre"
                    formControlName="nombre"
                    [class.is-invalid]="nombreInvalido">
        </div>
    </div>
    
    <div class="form-group row">
        <label class="col-2"> Apellido</label>
        <div class="col">
            <input  type="text"
                    class="form-control"
                    placeholder="Apellido"
                    formControlName="apellido"
                    [class.is-invalid]="apellidoInvalido">
        </div>
    </div>
    <div class="form-group row">
        <label class="col-2"> Direccion 1:</label>
        <div class="col">
            <input  type="text"
                    class="form-control"
                    placeholder="Direccion"
                    formControlName="direccion"
                    [class.is-invalid]="direccionInvalido">
        </div>
    </div>

    <div formArrayName="direcciones">
        <div class="form-group row" *ngFor="let direccion of direcciones.controls; let i=index">
            <label class="col-2"> Direccion {{i+2}}:</label>
            <div class="col-8" >
                <input  type="text"
                        class="form-control"
                        placeholder="Direcciones"
                        [formControlName]="i"
                        [class.is-invalid]="direccionesInvalido(i)">
            </div>
            <div class="col-2">
                <button class="btn btn-danger btn-block" (click)=quitarDir(i)>X</button>
            </div>
        </div>
    </div>

    <div class="col text-right m-3">
        <button class="btn btn-primary" (click)="agregaDirecciones()" type="button">
            + Agregar Direccion
        </button>
    </div>

    <button type="submit" class=" btn btn-outline-primary btn-block">
        Guardar
    </button>
</form>

<hr>
<pre>
Valid: {{forma.valid}}
Status : {{forma.status}}

{{forma.value | json}}
</pre>